<!DOCTYPE html>
<meta charset="utf-8"
      
<!-- Load d3 -->
<script src="//d3js.org/d3.v5.js"></script>


<h1>Crime in the United States13</h1>


<body onload="main()">
<div id="my_viz"></div>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
    
var svg = d3.select("#my_viz")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//Read the data
async function main() {
    const murderData = await d3.csv("data/murder_guns.csv",
    (d) => {
       return {
           state: d.state,
           total_murders: parseFloat(d.total_murders.replace(/,/g, '')),
           total_firearms: parseFloat(d.total_firearms.replace(/,/g, '')),
           handguns: parseFloat(d.handguns.replace(/,/g, '')),
           rifles: parseFloat(d.rifles.replace(/,/g, '')),
           shotguns: parseFloat(d.shotguns.replace(/,/g, '')),
           unknown_firearm: parseFloat(d.unknown_firearm.replace(/,/g, '')),
           knives: parseFloat(d.knives.replace(/,/g, '')),
           other_weapon: parseFloat(d.other_weapon.replace(/,/g, '')),
           hands: parseFloat(d.hands.replace(/,/g, ''))
       };
    });

    console.log(murderData);
        var x = d3.scaleBand()
            .domain(["Handguns", "Rifles", "Shotguns", "Unknown Firearm", "Knives", "Other Weapon", "Hands"])
            .range([ 0, width])
            .paddingInner(.05);
        svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    
        var y = d3.scaleLinear()
            .domain([0,1000])
            .range([ height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y));
    
        svg.selectAll("bar")
          .data(murderData)
          .enter().append("rect")
          .style("fill", "steelblue")
          .attr("x", x("Handguns"))
          .attr("width", x.bandwidth())
          .attr("y", function(d) { return y(d.handguns); })
          .attr("height", function(d) { return height - y(d.handguns); });
    
    
    
    
}

    



</script>
    </body>