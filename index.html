<!DOCTYPE html>
<meta charset="utf-8"
      
<!-- Load d3 -->
<script src="//d3js.org/d3.v5.js"></script>


<h1>Crime in the United States16</h1>


<body onload="main()">
<div id="my_viz"></div>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
    
var svg = d3.select("#my_viz")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//Read the data
async function main() {
    const data = await d3.csv("data/table-1.csv",
    (d) => {
       return {
            year: d3.timeParse("%Y")(d.year),
           murder: parseFloat(d.murder.replace(/,/g, '')),
           rape: parseFloat(d.rape.replace(/,/g, '')),
           robbery: parseFloat(d.robbery.replace(/,/g, '')),
           aggravated_assault: parseFloat(d.aggravated_assault.replace(/,/g, '')),
           burglary: parseFloat(d.burglary.replace(/,/g, '')),
           larceny_theft: parseFloat(d.larceny_theft.replace(/,/g, '')),
           motor_vehicle_theft: parseFloat(d.motor_vehicle_theft.replace(/,/g, ''))
       };
    });

    console.log(data);
        var x = d3.scaleTime()
            .domain(d3.extent(data, function(d) {return d.year;}))
            .range([ 0, width]);
        svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    
        var y = d3.scaleLinear()
            .domain([0, d3.max(data, function(d) { return d.larceny_theft;})]).nice()
            .range([ height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y));
    
        /*var crime = svg.selectAll(".crime")
            .data(data)
            .enter().append("g")
            .attr("class", "crime");
        //console.log(crime);*/
        svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "steelblue")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.murder)))
    
    svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "steelblue")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.aggravated_assault)))
    
    svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "steelblue")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.rape)))
    
    svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "steelblue")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.robbery)))
    
    svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "red")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.burglary)))
    
    
    
    svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "red")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.larceny_theft)))
    
    svg.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "red")
            .attr("stroke-width", 1.5)
            .attr("class", "line")
            .attr("d", d3.line()
                .x(d => x(d.year))
                 .y(d => y(d.motor_vehicle_theft)))
}

    



</script>
    </body>